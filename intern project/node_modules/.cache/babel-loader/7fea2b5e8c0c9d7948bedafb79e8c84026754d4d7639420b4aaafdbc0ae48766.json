{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nexport function useSpeechToText() {\n  _s();\n  const [transcript, setTranscript] = useState('');\n  const [isListening, setIsListening] = useState(false);\n  const recognitionRef = useRef(null);\n  useEffect(() => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      console.warn('Speech Recognition API not supported in this browser');\n      return;\n    }\n    const recognition = new SpeechRecognition();\n    recognition.continuous = true;\n    recognition.interimResults = true;\n    recognition.lang = 'en-US';\n    recognition.maxAlternatives = 1;\n\n    // Improve accuracy settings\n    if (recognition.serviceURI) {\n      recognition.serviceURI = 'wss://speech.platform.bing.com/consumer/speech/synthesize/readaloud/edge/v1?TrustedClientToken=6A5AA1D4EAFF4E9FB37E23D22C3A6FCF';\n    }\n    recognition.onresult = event => {\n      let interimTranscript = '';\n      let finalTranscript = '';\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        const transcript = event.results[i][0].transcript;\n        if (event.results[i].isFinal) {\n          finalTranscript += transcript + ' ';\n        } else {\n          interimTranscript += transcript;\n        }\n      }\n      setTranscript(finalTranscript + interimTranscript);\n    };\n    recognition.onerror = event => {\n      console.error('Speech recognition error:', event.error);\n      if (event.error === 'no-speech') {\n        setIsListening(false);\n      }\n    };\n    recognition.onend = () => {\n      setIsListening(false);\n    };\n    recognitionRef.current = recognition;\n    return () => {\n      if (recognitionRef.current) {\n        recognitionRef.current.stop();\n      }\n    };\n  }, []);\n  const startListening = () => {\n    if (recognitionRef.current && !isListening) {\n      try {\n        recognitionRef.current.start();\n        setIsListening(true);\n      } catch (error) {\n        console.error('Error starting recognition:', error);\n      }\n    }\n  };\n  const stopListening = () => {\n    if (recognitionRef.current && isListening) {\n      recognitionRef.current.stop();\n      setIsListening(false);\n    }\n  };\n  const resetTranscript = () => {\n    setTranscript('');\n  };\n  return {\n    transcript,\n    isListening,\n    startListening,\n    stopListening,\n    resetTranscript\n  };\n}\n_s(useSpeechToText, \"vnCmTUEDbQBVF/ADb+daLPbEqzg=\");","map":{"version":3,"names":["useState","useEffect","useRef","useSpeechToText","_s","transcript","setTranscript","isListening","setIsListening","recognitionRef","SpeechRecognition","window","webkitSpeechRecognition","console","warn","recognition","continuous","interimResults","lang","maxAlternatives","serviceURI","onresult","event","interimTranscript","finalTranscript","i","resultIndex","results","length","isFinal","onerror","error","onend","current","stop","startListening","start","stopListening","resetTranscript"],"sources":["C:/Users/DEll india/OneDrive/Desktop/intern project/src/hooks/useSpeechToText.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\r\n\r\nexport function useSpeechToText() {\r\n  const [transcript, setTranscript] = useState('');\r\n  const [isListening, setIsListening] = useState(false);\r\n  const recognitionRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n    \r\n    if (!SpeechRecognition) {\r\n      console.warn('Speech Recognition API not supported in this browser');\r\n      return;\r\n    }\r\n\r\n    const recognition = new SpeechRecognition();\r\n    recognition.continuous = true;\r\n    recognition.interimResults = true;\r\n    recognition.lang = 'en-US';\r\n    recognition.maxAlternatives = 1;\r\n    \r\n    // Improve accuracy settings\r\n    if (recognition.serviceURI) {\r\n      recognition.serviceURI = 'wss://speech.platform.bing.com/consumer/speech/synthesize/readaloud/edge/v1?TrustedClientToken=6A5AA1D4EAFF4E9FB37E23D22C3A6FCF';\r\n    }\r\n\r\n    recognition.onresult = (event) => {\r\n      let interimTranscript = '';\r\n      let finalTranscript = '';\r\n\r\n      for (let i = event.resultIndex; i < event.results.length; i++) {\r\n        const transcript = event.results[i][0].transcript;\r\n        if (event.results[i].isFinal) {\r\n          finalTranscript += transcript + ' ';\r\n        } else {\r\n          interimTranscript += transcript;\r\n        }\r\n      }\r\n\r\n      setTranscript(finalTranscript + interimTranscript);\r\n    };\r\n\r\n    recognition.onerror = (event) => {\r\n      console.error('Speech recognition error:', event.error);\r\n      if (event.error === 'no-speech') {\r\n        setIsListening(false);\r\n      }\r\n    };\r\n\r\n    recognition.onend = () => {\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognitionRef.current = recognition;\r\n\r\n    return () => {\r\n      if (recognitionRef.current) {\r\n        recognitionRef.current.stop();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const startListening = () => {\r\n    if (recognitionRef.current && !isListening) {\r\n      try {\r\n        recognitionRef.current.start();\r\n        setIsListening(true);\r\n      } catch (error) {\r\n        console.error('Error starting recognition:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const stopListening = () => {\r\n    if (recognitionRef.current && isListening) {\r\n      recognitionRef.current.stop();\r\n      setIsListening(false);\r\n    }\r\n  };\r\n\r\n  const resetTranscript = () => {\r\n    setTranscript('');\r\n  };\r\n\r\n  return {\r\n    transcript,\r\n    isListening,\r\n    startListening,\r\n    stopListening,\r\n    resetTranscript\r\n  };\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}