{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nexport function useSpeechToText() {\n  _s();\n  const [transcript, setTranscript] = useState('');\n  const [isListening, setIsListening] = useState(false);\n  const recognitionRef = useRef(null);\n  useEffect(() => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      console.warn('Speech Recognition API not supported in this browser');\n      return;\n    }\n    const recognition = new SpeechRecognition();\n    recognition.continuous = true;\n    recognition.interimResults = true;\n    recognition.lang = 'en-US';\n    recognition.maxAlternatives = 1;\n    recognition.onresult = event => {\n      let interimTranscript = '';\n      let finalTranscript = '';\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        const result = event.results[i];\n        const transcript = result[0].transcript;\n\n        // Use confidence score if available for better accuracy\n        if (result.isFinal) {\n          finalTranscript += transcript + ' ';\n        } else {\n          interimTranscript += transcript;\n        }\n      }\n\n      // Combine final and interim, prioritizing final results\n      const combined = finalTranscript.trim() + (interimTranscript ? ' ' + interimTranscript : '');\n      setTranscript(combined);\n    };\n    recognition.onerror = event => {\n      console.error('Speech recognition error:', event.error);\n      if (event.error === 'no-speech') {\n        setIsListening(false);\n      }\n    };\n    recognition.onend = () => {\n      setIsListening(false);\n      // Auto-restart if it was listening (handles silent pauses)\n      if (recognitionRef.current && recognitionRef.current.continuous) {\n        try {\n          recognitionRef.current.start();\n          setIsListening(true);\n        } catch (error) {\n          // Ignore errors when restarting\n        }\n      }\n    };\n    recognitionRef.current = recognition;\n    return () => {\n      if (recognitionRef.current) {\n        recognitionRef.current.stop();\n      }\n    };\n  }, []);\n  const startListening = () => {\n    if (recognitionRef.current && !isListening) {\n      try {\n        recognitionRef.current.start();\n        setIsListening(true);\n      } catch (error) {\n        console.error('Error starting recognition:', error);\n      }\n    }\n  };\n  const stopListening = () => {\n    if (recognitionRef.current && isListening) {\n      recognitionRef.current.stop();\n      setIsListening(false);\n    }\n  };\n  const resetTranscript = () => {\n    setTranscript('');\n  };\n  return {\n    transcript,\n    isListening,\n    startListening,\n    stopListening,\n    resetTranscript\n  };\n}\n_s(useSpeechToText, \"vnCmTUEDbQBVF/ADb+daLPbEqzg=\");","map":{"version":3,"names":["useState","useEffect","useRef","useSpeechToText","_s","transcript","setTranscript","isListening","setIsListening","recognitionRef","SpeechRecognition","window","webkitSpeechRecognition","console","warn","recognition","continuous","interimResults","lang","maxAlternatives","onresult","event","interimTranscript","finalTranscript","i","resultIndex","results","length","result","isFinal","combined","trim","onerror","error","onend","current","start","stop","startListening","stopListening","resetTranscript"],"sources":["C:/Users/DEll india/OneDrive/Desktop/intern project/src/hooks/useSpeechToText.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\r\n\r\nexport function useSpeechToText() {\r\n  const [transcript, setTranscript] = useState('');\r\n  const [isListening, setIsListening] = useState(false);\r\n  const recognitionRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n    \r\n    if (!SpeechRecognition) {\r\n      console.warn('Speech Recognition API not supported in this browser');\r\n      return;\r\n    }\r\n\r\n    const recognition = new SpeechRecognition();\r\n    recognition.continuous = true;\r\n    recognition.interimResults = true;\r\n    recognition.lang = 'en-US';\r\n    recognition.maxAlternatives = 1;\r\n\r\n    recognition.onresult = (event) => {\r\n      let interimTranscript = '';\r\n      let finalTranscript = '';\r\n\r\n      for (let i = event.resultIndex; i < event.results.length; i++) {\r\n        const result = event.results[i];\r\n        const transcript = result[0].transcript;\r\n        \r\n        // Use confidence score if available for better accuracy\r\n        if (result.isFinal) {\r\n          finalTranscript += transcript + ' ';\r\n        } else {\r\n          interimTranscript += transcript;\r\n        }\r\n      }\r\n\r\n      // Combine final and interim, prioritizing final results\r\n      const combined = finalTranscript.trim() + (interimTranscript ? ' ' + interimTranscript : '');\r\n      setTranscript(combined);\r\n    };\r\n\r\n    recognition.onerror = (event) => {\r\n      console.error('Speech recognition error:', event.error);\r\n      if (event.error === 'no-speech') {\r\n        setIsListening(false);\r\n      }\r\n    };\r\n\r\n    recognition.onend = () => {\r\n      setIsListening(false);\r\n      // Auto-restart if it was listening (handles silent pauses)\r\n      if (recognitionRef.current && recognitionRef.current.continuous) {\r\n        try {\r\n          recognitionRef.current.start();\r\n          setIsListening(true);\r\n        } catch (error) {\r\n          // Ignore errors when restarting\r\n        }\r\n      }\r\n    };\r\n\r\n    recognitionRef.current = recognition;\r\n\r\n    return () => {\r\n      if (recognitionRef.current) {\r\n        recognitionRef.current.stop();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const startListening = () => {\r\n    if (recognitionRef.current && !isListening) {\r\n      try {\r\n        recognitionRef.current.start();\r\n        setIsListening(true);\r\n      } catch (error) {\r\n        console.error('Error starting recognition:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const stopListening = () => {\r\n    if (recognitionRef.current && isListening) {\r\n      recognitionRef.current.stop();\r\n      setIsListening(false);\r\n    }\r\n  };\r\n\r\n  const resetTranscript = () => {\r\n    setTranscript('');\r\n  };\r\n\r\n  return {\r\n    transcript,\r\n    isListening,\r\n    startListening,\r\n    stopListening,\r\n    resetTranscript\r\n  };\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}